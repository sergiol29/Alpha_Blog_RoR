<h2 class="center">Listing users</h2>

<p>
    <%= link_to "Create a new user", new_user_path, class: "btn btn-sm btn-info" %>
</p>

<!-- Table -->
<table class="table">
    <tr>
        <th> Name </th>
        <th> Description </th>
        <th> Town </th>
        <th> Count </th>
        <th> Username </th>
        <th> Email </th>
        <th> Number Articles </th>
        <th> Edit </th>
        <th> Show </th>
        <th> Delete </th>
    </tr>
    <% @user.each do |user| %>
    <tr>
        <td><%= user.name %></td>
        <td><%= truncate(user.description, length: 20) %></td>
        <td><%= user.town %></td>
        <td><%= user.count %></td>
        <td><%= user.username %></td>
        <td><%= user.email %></td>
        <td><%= user.articles.count if user.articles %></td>
        <% if logged_in? && current_user == user %>
            <td><%= link_to "Edit", edit_user_path(user), class: "btn btn-xs btn-primary" %></td>
            <td><%= link_to "Show", user_path(user), class: "btn btn-xs btn-warning" %></td>
            <td><%= link_to "Delete", user_path(user), method: :delete, data: {confirm: "Are you sure?"}, class: "btn btn-xs btn-danger"%></td>
        <% end %>
    </tr>
    <% end %>
</table>
